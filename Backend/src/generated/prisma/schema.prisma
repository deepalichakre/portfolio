generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
  // maybe binaryTargets = ["windows"] or nothing
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Project {
  id            String         @id @default(cuid())
  title         String
  slug          String         @unique
  summary       String
  bodyMDX       String
  status        ProjectStatus  @default(Draft)
  industry      String?
  techStack     String[]
  highlight     Boolean        @default(false)
  coverImageUrl String?
  youtubeUrl    String?
  repoUrl       String?
  liveUrl       String?
  datasetUrl    String?
  startedOn     DateTime?
  completedOn   DateTime?
  kpis          Json?
  tags          String[]
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  media         Media[]
  skills        ProjectSkill[]
}

model Skill {
  id       String         @id @default(cuid())
  name     String         @unique
  category String
  projects ProjectSkill[]
}

model ProjectSkill {
  projectId String
  skillId   String
  project   Project @relation(fields: [projectId], references: [id])
  skill     Skill   @relation(fields: [skillId], references: [id])

  @@id([projectId, skillId])
}

model Media {
  id        String  @id @default(cuid())
  projectId String
  kind      String
  url       String
  caption   String?
  sort      Int     @default(0)
  project   Project @relation(fields: [projectId], references: [id])
}

enum ProjectStatus {
  Draft
  Published
  Hidden
}
